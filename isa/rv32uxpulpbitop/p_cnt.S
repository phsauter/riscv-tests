# See LICENSE for license details.

#*****************************************************************************
# p.cnt
#-----------------------------------------------------------------------------
#
# Test p.cnt instruction.
# 
#

#include "riscv_test.h"
#include "test_macros.h"

RVTEST_RV32U
RVTEST_CODE_BEGIN

  #-------------------------------------------------------------
  # Arithmetic tests
  #-------------------------------------------------------------
  TEST_R_OP( 2, p.cnt, 0, 0b00000000000000000000000000000000 )
  TEST_R_OP( 3, p.cnt, 1, 0b00000000000000000000000000000001 )
  TEST_R_OP( 4, p.cnt, 1, 0b10000000000000000000000000000000 )
  TEST_R_OP( 5, p.cnt, 32, 0b11111111111111111111111111111111 )
  TEST_R_OP( 6, p.cnt, 31, 0b01111111111111111111111111111111 )
  TEST_R_OP( 7, p.cnt, 31, 0b11111111111111111111111111111110 )
  TEST_R_OP( 8, p.cnt, 14, 0b11000110110000011010110000100110 )
  TEST_R_OP( 9, p.cnt, 17, 0b11110111010000100000100111111100 )
  TEST_R_OP( 10, p.cnt, 12, 0b01000010010100101011100001001010 )
  TEST_R_OP( 11, p.cnt, 19, 0b10110101011111111001010100110010 )
  TEST_R_OP( 12, p.cnt, 16, 0b11010000110111100001001110001011 )
  TEST_R_OP( 13, p.cnt, 19, 0b10110010111100101110101011110010 )
  TEST_R_OP( 14, p.cnt, 11, 0b00011000001010000001101111100000 )
  TEST_R_OP( 15, p.cnt, 20, 0b10010010101011111101001111100111 )
  TEST_R_OP( 16, p.cnt, 18, 0b00001100111110100101011011011011 )
  TEST_R_OP( 17, p.cnt, 19, 0b11001101111011001000111101110010 )
  

  #-------------------------------------------------------------
  # Source/Destination tests
  #-------------------------------------------------------------
  TEST_R_SRC1_EQ_DEST( 18, p.cnt, 18, 0b10101100011011001101100110111001 )
  TEST_R_SRC1_EQ_DEST( 19, p.cnt, 20, 0b11110011001110110001111101011010 )
  

  #-------------------------------------------------------------
  # Bypassing tests
  #-------------------------------------------------------------
  TEST_R_DEST_BYPASS( 20, 0, p.cnt, 18, 0b10101111011100100111000111100010 )
  TEST_R_DEST_BYPASS( 21, 1, p.cnt, 18, 0b11001001011110111010011100001011 )
  TEST_R_DEST_BYPASS( 22, 2, p.cnt, 16, 0b00101100111100001100001101101110 )
  TEST_R_DEST_BYPASS( 23, 0, p.cnt, 17, 0b11010010010000010111110111100101 )
  TEST_R_DEST_BYPASS( 24, 1, p.cnt, 16, 0b11100000100100001010011110111011 )
  TEST_R_DEST_BYPASS( 25, 2, p.cnt, 13, 0b00010110110000101000110110001010 )
  

  

  TEST_PASSFAIL

# Input data section.
RVTEST_CODE_END

  .data

# Output data section.
RVTEST_DATA_BEGIN

  TEST_DATA

RVTEST_DATA_END
