# See LICENSE for license details.

#*****************************************************************************
# p.cnt
#-----------------------------------------------------------------------------
#
# Test p.cnt instruction.
# 
#

#include "riscv_test.h"
#include "test_macros.h"

RVTEST_RV32U
RVTEST_CODE_BEGIN

  #-------------------------------------------------------------
  # Arithmetic tests
  #-------------------------------------------------------------
  TEST_R_OP( 2, p.cnt, 0, 0b00000000000000000000000000000000 )
  TEST_R_OP( 3, p.cnt, 1, 0b00000000000000000000000000000001 )
  TEST_R_OP( 4, p.cnt, 1, 0b10000000000000000000000000000000 )
  TEST_R_OP( 5, p.cnt, 32, 0b11111111111111111111111111111111 )
  TEST_R_OP( 6, p.cnt, 31, 0b01111111111111111111111111111111 )
  TEST_R_OP( 7, p.cnt, 31, 0b11111111111111111111111111111110 )
  TEST_R_OP( 8, p.cnt, 16, 0b01101110101110001001001101001100 )
  TEST_R_OP( 9, p.cnt, 14, 0b01100011110001001000110100010011 )
  TEST_R_OP( 10, p.cnt, 19, 0b10000101111100001101101011101111 )
  TEST_R_OP( 11, p.cnt, 14, 0b11110000000100010110100000101111 )
  TEST_R_OP( 12, p.cnt, 21, 0b00001111011111001111010111011011 )
  TEST_R_OP( 13, p.cnt, 16, 0b00000101110000011110101001011111 )
  TEST_R_OP( 14, p.cnt, 20, 0b11110111011100111001101101000110 )
  TEST_R_OP( 15, p.cnt, 17, 0b00111001001110100010100110110111 )
  TEST_R_OP( 16, p.cnt, 19, 0b11010100101110101011011100111100 )
  TEST_R_OP( 17, p.cnt, 15, 0b01010001001100011010011001011110 )
  

  #-------------------------------------------------------------
  # Source/Destination tests
  #-------------------------------------------------------------
  TEST_R_SRC1_EQ_DEST( 18, p.cnt, 13, 0b00110101111000000000000101011011 )
  TEST_R_SRC1_EQ_DEST( 19, p.cnt, 20, 0b00000101111111110101110101001111 )
  

  #-------------------------------------------------------------
  # Bypassing tests
  #-------------------------------------------------------------
  TEST_R_DEST_BYPASS( 20, 0, p.cnt, 16, 0b11100111110010100011001001100100 )
  TEST_R_DEST_BYPASS( 21, 1, p.cnt, 19, 0b11101100111110001100011001111001 )
  TEST_R_DEST_BYPASS( 22, 2, p.cnt, 15, 0b11101100000010011101110001000011 )
  TEST_R_DEST_BYPASS( 23, 0, p.cnt, 16, 0b11110001111011011000000001001011 )
  TEST_R_DEST_BYPASS( 24, 1, p.cnt, 18, 0b01101110110101011010001100011110 )
  TEST_R_DEST_BYPASS( 25, 2, p.cnt, 14, 0b11010000101011101010000100001011 )
  

  

  TEST_PASSFAIL

# Input data section.
RVTEST_CODE_END

  .data

# Output data section.
RVTEST_DATA_BEGIN

  TEST_DATA

RVTEST_DATA_END
